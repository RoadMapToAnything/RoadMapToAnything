
<!-- Link box -->
<div class="link-box">

  <div class="row">
    <div class="col s12 m16">
      <div class="card hoverable teal lighten-5">
        <div class="card-content">
          <span ng-hide="hideText('box-title', currentIndex)"
                ng-click="showEditor(currentIndex, 'title', true, 'box-title')"
                class="card-title truncate"><b>{{ currentTitle }}</b></span>
          <div class="input-field col s12" 
               ng-show="hideText('box-title', currentIndex)">
            <input id="{{'box-title-' + currentIndex }}"
                   value="{{ getPlaceholder(currentIndex, 'title') }}"
                   type="text" 
                   class="validate">
            <span class="editor-buttons">
              <button ng-click="saveEdit(currentIndex, 'title', 'box')"
                      class="save btn-flat">Save</button>
              <button ng-click="showEditor(currentIndex, 'title', false, 'box-title')"
                      class="cancel btn-flat">Cancel</button>
            </span>
          </div>


          <p ng-hide="hideText('box-desc', currentIndex)"
             ng-click="showEditor(currentIndex, 'desc', true, 'box-desc')"
             ng-bind="currentDescription"
             class="author-input">This is the description of why this matters.</p>
          <div class="input-field col s12 " 
               ng-show="hideText('box-desc', currentIndex)">
            <input id="{{'box-desc' + currentIndex }}"
                   value="{{ getPlaceholder(currentIndex, 'description') }}"
                   type="text" 
                   class="validate">
            <span class="editor-buttons">
              <button ng-click="saveEdit(currentIndex, 'description', 'box-desc')"
                      class="save btn-flat">Save</button>
              <button ng-click="showEditor(currentIndex,'desc', false, 'box-desc')"
                      class="cancel btn-flat">Cancel</button>
            </span>
          </div>
          <ul>
            <li> 
              <div ng-hide="hideText('box-link', currentIndex)">
                <a class="truncate"
                   target="_blank" 
                   ng-href={{currentResourceURL}}>{{currentResourceURL}}</a>
                <a ng-show="isAuthor" ng-click="showEditor(currentIndex, 'resourceURL', true, 'box-link')"
                   class="author-input">[edit link]</a>
              </div>
              <div class="input-field col s12"
                   ng-show="hideText('box-link', currentIndex)">
                <input id="{{'box-link' + currentIndex }}"
                       value="{{ getPlaceholder(currentIndex, 'resourceURL') }}"
                       type="text" 
                       class="validate">
                <span class="editor-buttons">
                  <button ng-click="saveEdit(currentIndex, 'resourceURL', 'box-link')"
                          class="save btn-flat">Save</button>
                  <button ng-click="showEditor(currentIndex, 'resourceURL', false, 'box-link')"
                          class="cancel btn-flat">Cancel</button>
                </span>
            </div>
            </li>
          </ul>

          <img ng-hide="hideText('box-image', currentIndex)"
             ng-click="showEditor(currentIndex, 'imageUrl', true, 'box-image')"
             ng-src="{{currentImageUrl}}"
             class="author-input node-image" />
          <div class="input-field col s12 " 
               ng-show="hideText('box-image', currentIndex)">
            <input id="{{'box-image' + currentIndex }}"
                   value="{{ getPlaceholder(currentIndex, 'imageUrl') }}"
                   type="text" 
                   class="validate">
            <span class="editor-buttons">
              <button ng-click="saveEdit(currentIndex, 'imageUrl', 'box-image')"
                      class="save btn-flat">Save</button>
              <button ng-click="showEditor(currentIndex, 'imageUrl', false, 'box-image')"
                      class="cancel btn-flat">Cancel</button>
            </span>
          </div>
        </div>
        <div class="card-action">
          <button class="link-box-btn amber darken-1 btn" ng-click="submitCompletedNode()">Node Done</button>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Node Creation Box -->
<div ng-show="displayNodeCreator"
     class="creation-box">

  <div class="row">
    <div class="col s12 m16">
      <div class="card hoverable teal lighten-5">
        <div class="card-content">
          <span ng-hide="hideText('box-title', currentIndex)"
                ng-click="showEditor(currentIndex, 'title', true, 'box-title')"
                class="card-title"><b>Add a Node</b></span>
                <span class="right">
                  <i ng-click="closeNodeCreator()"
                     class="fa fa-times fa-lg"></i>
                </span>
          <div class="input-field col s12 blue lighten-4">
            <input id="creation-scraper"
                   ng-model="urlToScrape"
                   type="url">
            <span class="editor-buttons">
              <button ng-click="checkAndSubmit()"
                      class="save btn-flat">Get Info</button>
            </span>
          </div>
            <input id="node-creation-title"
                   ng-model="newNode.title"
                   type="text"
                   placeholder="Get node info automatically by pasting the link here">
            <input id="node-creation-description"
                   ng-model="newNode.description"
                   type="text">
            <input id="node-creation-type"
                   ng-model="newNode.type"
                   type="text">
            <input id="node-creation-link"
                   ng-model="newNode.resourceURL"
                   type="url">
            <input id="node-creation-image"
                   ng-model="newNode.imageUrl"
                   type="url">
            <button class="link-box-btn btn" ng-click="createNode(currentAddIndex)">Add Node</button>
          </div>
          <ul>
            <li>
              <div ng-hide="hideText('box-link', currentIndex)">
              </div>
              <div class="input-field col s12"
                   ng-show="hideText('box-link', currentIndex)">
                <input id="{{'box-resourceURL-' + currentIndex }}"
                       ng-model="urlToScrape"
                       type="text" 
                       class="validate">
                <span class="editor-buttons">
                  <button ng-click="saveEdit(currentIndex, 'resourceURL', 'box')"
                          class="save btn-flat">Save</button>
                  <button ng-click="showEditor(currentIndex, 'resourceURL', false, 'box-link')" class="cancel btn-flat">Cancel</button>
                </span>
            </div>
            </li>
          </ul>
        </div>
        <div class="card-action">
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Editor Mode Message -->
  <div id="editor-placeholder"></div>

  <!-- Roadmap Title -->

<div class="col s8 roadmap-title">
  <h3 ng-hide="hideTitle"
      ng-click="showTitleEditor(true)"
      class="center-align"
      ng-bind="roadMapTitle">Title of the RoadMap Itself</h3>
    <div class="input-field col s12"
         ng-show="hideTitle">
      <input id="map-title"
             value="{{ roadMapTitle }}"
             type="text"
             class="validate">
      <span class="editor-buttons">
        <button ng-click="saveTitleEdit()" class="save btn-flat">Save</button>
        <button class="cancel btn-flat" ng-click="showTitleEditor(false)">Cancel</button>
      </span>
    </div>

      <p ng-hide="hideDesc"
      ng-click="showDescEditor(true)"
      class="center-align"
      ng-bind="roadMapDesc">Roadmap Description</p>
    <div class="input-field col s12"
         ng-show="hideDesc">
      <input id="main-desc"
             value="{{ roadMapDesc }}"
             type="text"
             class="validate">
      <span class="editor-buttons right">
        <button ng-click="saveDescEdit()" class="save btn-flat">Save</button>
        <button class="cancel btn-flat" ng-click="showDescEditor(false)">Cancel</button>
      </span>
    </div>

  <div class="divider"></div>
  <br>

   <!-- Nodes -->
<div class="node-list container">

  <div ng-repeat="node in roadmap.nodes">

    <div ng-class="{ selectedCircle : $index == currentIndex, circle : true }" id="{{ 'node-' + node.index }}" ng-click="selectNode(node.index)">
      <div class="number">{{ node.index + 1 }}
      </div>
    </div>
  
    <div ng-hide="isAuthor" class="center-align connector"></div>

     <div ng-click="showNodeCreator($index, true)">
      <div ng-show="isAuthor" class="center-align mini-connector-a"></div>
      <div ng-show="isAuthor" class="mini-circle"><div class="plus">+</div></div>
      <div ng-show="isAuthor" class="center-align mini-connector-b"></div>
    </div>

  </div>

      <button class="link-box-btn amber darken-1 btn doneBtn" ng-click="submitCompletedRoadmap()">Map Done</button>

</div>

   <!-- Node Descriptions -->

<div class="title-list container">
  <div ng-repeat="node in roadmap.nodes">
    <span ng-hide="hideText('main-title', $index)"
          ng-click="showEditor($index, 'title', true, 'main-title')"
          class="node-description truncate node-title"
          ng-bind="node.title"> Title</span>
    <div class="input-field col s12"
         ng-show="hideText('main-title', $index)">
      <input id="{{'main-title' + $index }}"
             value="{{ getPlaceholder($index, 'title') }}"
             type="text"
             class="validate">
      <span class="editor-buttons">
        <button ng-click="saveEdit($index, 'title', 'main-title')" class="save btn-flat">Save</button>
        <button class="cancel btn-flat" ng-click="showEditor($index, 'title', false, 'main-title')">Cancel</button>
      </span>
    </div>
  </div>
</div>

<div class="center">   <!-- Buttons for Voting -->
      <p><i class="fa fa-thumbs-o-up fa-lg" ng-click="upVoteMap()" ng-bind="roadmap.upvotes" style="color:green"></i></p>
      <p><i class="fa fa-thumbs-o-down fa-lg" ng-click="downVoteMap()" ng-bind="roadmap.downvotes" style="color:red"></i></p>
</div>

<br><br><br><br><br>


<div class="row">
  <button type="submit" class="btn amber darken-1 link-box-btn col offset-s3" ng-show="!showComments" ng-click="toggleComments()">Click to Show Comment Section</button>
  <button type="submit" class="btn amber darken-1 link-box-btn col offset-s3" ng-show="showComments" ng-click="toggleComments()">Click to Hide Comment Section</button>
</div>
<!-- <button class="link-box-btn amber darken-1 btn" ng-click="submitCompletedNode()">Node Done</button> -->



<div class="row commentSection" ng-show="showComments">
  <div class="col s7 offset-s4">
    
  
  <h4>Comment Section       <i class="material-icons">comment</i> </h4>

  <ul class="collapsible" data-collapsible="accordion">
    <li ng-repeat="comment in renderedComments">
      <div class="collapsible-header" ><h5 ng-bind="comment.subject">I am the subject</h5> </div>
      <div class="collapsible-body"> <p ng-bind="comment.content">I am the content</p> </div>
    </li>
  </ul>

  <h3>Post a Comment!</h3>
    <form class="col s12" ng-submit="postComment()">
      <div class="row">
        <div class="input-field col s6">
          <input id="input_text" type="text" length="20" ng-model="subject">
          <label for="input_text" >Subject</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <textarea id="textarea1" class="materialize-textarea" length="120" ng-model="content"></textarea>
          <label for="textarea1" >Content</label>
        </div>
      </div>
      <div class="row">
          <button type="submit" class="link-box-btn btn amber darken-1 commentBtn">Submit your Comment!</button>
      </div>
    </form>
    </div>
  </div>



